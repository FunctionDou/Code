## 进程切换

---



>**<font color=#b20>进程的切换, 就相当于是页表的切换</font>**
>
>**任何的进程切换都会更换活动页表**

> 1. **硬件上下文的一部分保存在段描述符的任务状态段(TSS), 将此时的寄存器(cs, es exp, eax等)保存起来.剩下一部分保存在内核态栈中, 也就是thread_struct类型的thread字段中.**
>
> 	**当发生进程切换的时侯都会调用thread字段.**
>
> 2. **进程切换的时侯会调用段选择符查找 GDT 表, 找到对应的段描述符, 并且读取任务状态段(TSS)的寄存器覆盖掉现在寄存器的值, 并将段描述符存入非编辑寄存器中, 最后找到执行进程的相应的物理地址. **
>
> 	**<font color=#b20>进程切换只会发生在内核态</font>所以TSS只会在GDT中**
>
> 3. **同时cr3寄存器将上一个进程描述符的pdg存放在它的内核态栈中.**
>
> 4. **将GDT(LDT)找到的物理地址传给cr3寄存器, cr3寄存器也就保存了新进程的页目录地址, 然后将内核态栈中保留在thread字段的数据提取出来.**



---

### init

> init0 : 

